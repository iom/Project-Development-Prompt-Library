<div class="space-y-4">
    <div class="text-sm text-gray-600 mb-4">
        Found {{ total }} prompts
    </div>
    
    {% for prompt in items %}
    <div class="bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow">
        <div class="flex justify-between items-start mb-3">
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-gray-900 mb-1">
                    <button onclick="togglePromptDetails('{{ prompt.id }}')" class="hover:text-blue-600 text-left">
                        {{ prompt.title }}
                    </button>
                </h3>
                <div class="flex items-center space-x-4 text-sm text-gray-600 mb-2">
                    <span class="inline-flex items-center">
                        <i class="fas fa-folder mr-1"></i>
                        {{ categories.get(prompt.category_id, 'Unknown') }}
                    </span>
                    {% if prompt.ai_platform %}
                    <span class="inline-flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
                        <i class="fas fa-robot mr-1"></i>
                        {{ prompt.ai_platform }}
                    </span>
                    {% endif %}
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="togglePromptDetails('{{ prompt.id }}')" 
                        class="bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700">
                    <span id="toggle-text-{{ prompt.id }}">View Details</span>
                </button>
                <button onclick="copyPrompt('{{ prompt.id }}')" 
                        class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    Copy
                </button>
            </div>
        </div>
        
        <!-- Preview text -->
        <div id="preview-{{ prompt.id }}" class="text-gray-700 text-sm leading-relaxed mb-3">
            {% if prompt.body|length > 200 %}
                {{ prompt.body[:200] }}...
            {% else %}
                {{ prompt.body }}
            {% endif %}
        </div>
        
        <!-- Full details (hidden by default) -->
        <div id="details-{{ prompt.id }}" class="hidden">
            {% if prompt.instructions %}
            <div class="mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400">
                <h4 class="text-sm font-semibold text-yellow-800 mb-2">
                    <i class="fas fa-lightbulb mr-1"></i>
                    Instructions
                </h4>
                <p class="text-sm text-yellow-700">{{ prompt.instructions }}</p>
            </div>
            {% endif %}
            
            <div class="p-3 bg-gray-50 border rounded">
                <h4 class="text-sm font-semibold text-gray-800 mb-2">
                    <i class="fas fa-file-text mr-1"></i>
                    Full Prompt
                </h4>
                <p class="text-sm text-gray-700 whitespace-pre-line">{{ prompt.body }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if total > page_size %}
<div class="flex justify-center mt-6 space-x-2">
    {% set total_pages = (total + page_size - 1) // page_size %}
    {% for p in range(1, [total_pages + 1, 6]|min) %}
    <button onclick="loadPage({{ p }})" class="{% if p == page %}bg-blue-600 text-white{% else %}bg-white text-gray-700 hover:bg-gray-50{% endif %} px-3 py-2 rounded-md border text-sm">
        {{ p }}
    </button>
    {% endfor %}
</div>
{% endif %}